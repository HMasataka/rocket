# Rocket 開発ロードマップ

各マイルストーンで完動品としてリリース可能な状態を維持します。
後続フェーズの機能追加を妨げないアーキテクチャ設計を心がけます。

## v0.0 - 技術スパイク

**ゴール**: 技術選定と基盤方針の決定（手戻りリスクの最小化）

- [x] プログラミング言語選定
  - [x] Rust を採用（ADR-0001）
- [x] GUI フレームワーク選定
  - [x] Tauri v2 + React (TypeScript) を採用（ADR-0002）
  - [x] プロトタイプ作成（簡単なウィンドウ表示）
  - [x] クロスプラットフォームビルド確認
- [x] Git バックエンド方針決定
  - [x] git2-rs メイン + git CLI フォールバックのハイブリッド構成を採用（ADR-0003）
  - [x] GitBackend トレイト設計
  - [ ] 大規模リポジトリでのパフォーマンス検証
  - [x] 認証周りの実現可能性確認
- [x] プロジェクト構成
  - [x] ディレクトリ構成の決定
  - [x] レイヤー分離の方針確定（ADR-0004）
  - [x] CI/CD パイプライン雛形

**完動品としての価値**: 技術的な不確実性を解消し、本開発に着手できる状態

---

## v0.1 - MVP（最小動作版）

**ゴール**: 「見る → ステージする → コミットする」の基本ワークフローが完結

- [x] プロジェクト基盤
  - [x] Rust / Tauri v2 プロジェクト初期化
  - [x] React (TypeScript) フロントエンドセットアップ
  - [x] git2-rs 統合・GitBackend トレイト実装
  - [x] 設定ファイル基盤（~/.config/rocket/）
  - [x] フロントエンドアーキテクチャ確定（ADR-0005）
  - [x] Biome（フォーマッタ・リンター）導入
  - [x] テスト基盤（Vitest / cargo test / テストCI）
- [x] CLI 起動
  - [x] `rocket .` でカレントディレクトリを開く
  - [x] `rocket /path/to/repo` で指定パスを開く
  - [x] 引数なしで最後に開いたリポジトリ or ホーム画面
- [x] リポジトリ状態表示
  - [x] 変更ファイル一覧（Untracked / Modified / Staged）
  - [x] 基本的なファイルツリー表示
- [x] 差分表示
  - [x] ファイル選択で差分をインライン表示
  - [x] 追加/削除行のハイライト
- [x] ステージング
  - [x] ファイル単位でステージ/アンステージ
  - [x] 全ファイル一括ステージ/アンステージ
- [x] コミット
  - [x] コミットメッセージ入力（件名 + 本文）
  - [x] コミット実行
  - [x] コミット成功/失敗の表示

**完動品としての価値**: ローカルでの基本的なコミット作業ができる

---

## v0.2 - ブランチ操作

**ゴール**: ブランチを使った並行開発ができる

- [x] ブランチ一覧
  - [x] ローカルブランチ表示
  - [x] 現在のブランチをハイライト
- [x] ブランチ操作
  - [x] 新規ブランチ作成
  - [x] ブランチ切り替え（checkout）
  - [x] ブランチ削除
  - [x] ブランチ名変更
- [x] マージ（基本）
  - [x] 選択ブランチを現在のブランチにマージ
  - [x] Fast-forward / No-ff 選択
  - [x] マージ成功/失敗の表示

**完動品としての価値**: feature ブランチでの開発 → main へのマージができる

---

## v0.3 - リモート操作

**ゴール**: チームでの共同開発ができる

- [x] 認証基盤
  - [x] Git Credential Helper 連携
  - [x] ssh-agent 連携
  - [ ] 環境変数からのトークン取得
- [x] Fetch
  - [x] リモートから最新情報を取得
  - [ ] フェッチ結果の表示（新規コミット数等）
- [x] Pull
  - [x] リモートの変更を取り込み
  - [x] merge / rebase 選択
- [x] Push
  - [x] ローカルの変更をリモートに送信
  - [ ] アップストリーム未設定時の設定
- [x] リモート管理
  - [x] リモート一覧表示
  - [x] リモート追加/編集/削除
- [x] ブランチ一覧拡張
  - [x] リモートブランチ表示
  - [ ] リモートブランチからローカル作成
- [x] カスタムタイトルバー
  - [x] OS標準ウィンドウ装飾を廃止し自前実装
  - [x] close / minimize / maximize ボタン（macOS風ドット）
  - [x] ホバー時のmacOS公式準拠アイコン（SVG）
  - [x] data-tauri-drag-region によるドラッグ移動
  - [x] ダブルクリックで最大化/復元
  - [x] ウィンドウ角丸（透明背景 + border-radius）

**完動品としての価値**: GitHub/GitLab と連携した開発フローができる

---

## v0.4 - 履歴・ログ

**ゴール**: コミット履歴の確認と調査ができる

- [x] コミット履歴表示
  - [x] コミット一覧（ハッシュ、メッセージ、作者、日時）
  - [x] コミットグラフ（ブランチの分岐・マージを視覚化）
- [x] コミット詳細
  - [x] 選択コミットの変更ファイル一覧
  - [x] 各ファイルの差分表示
- [x] フィルタリング
  - [x] 作者で絞り込み
  - [x] 日付範囲で絞り込み
  - [x] メッセージ検索
  - [x] ファイルパスで絞り込み
- [x] Blame
  - [x] ファイル選択 → 各行の最終変更コミット表示
  - [ ] 行クリックでコミット詳細へジャンプ
- [x] ファイル履歴
  - [x] 特定ファイルの変更履歴一覧

**完動品としての価値**: 「いつ誰が何を変更したか」を追跡できる

---

## v0.5 - ハンク単位ステージング

**ゴール**: 変更をハンク（変更ブロック）単位で選択してコミットできる

- [x] 差分ビューア改善
  - [x] サイドバイサイド表示
  - [x] インライン表示との切り替え
  - [x] 単語単位の差分ハイライト
- [x] ハンク単位ステージング
  - [x] 差分をハンク（変更ブロック）に分割表示
  - [x] ハンクごとにステージ/アンステージ
- [x] ハンク単位の破棄
  - [x] ハンク単位で変更を破棄

**完動品としての価値**: 1ファイル内の複数変更を分けてコミットできる

---

## v0.6 - 行単位ステージング・Amend

**ゴール**: 行単位の細かい操作と直前コミットの修正ができる

- [x] 行単位ステージング
  - [x] 行を選択してステージ
  - [x] 選択範囲のステージ
- [x] 行単位の破棄
  - [x] 行を選択して破棄
- [x] Amend
  - [x] 直前のコミットを修正
  - [x] メッセージのみ修正
  - [x] 変更を追加して修正

**完動品としての価値**: より細かい粒度でのコミット操作ができる

---

## v0.7 - スタッシュ・タグ

**ゴール**: 作業の一時退避とリリース管理ができる

- [x] スタッシュ
  - [x] 現在の変更をスタッシュに退避
  - [x] スタッシュ一覧表示
  - [x] スタッシュの差分プレビュー
  - [x] 適用（apply）/ ポップ（pop）
  - [x] スタッシュ削除
- [x] タグ
  - [x] タグ一覧（ローカル）
  - [x] 軽量タグ作成
  - [x] 注釈付きタグ作成
  - [x] タグ削除
  - [x] タグへのチェックアウト

**完動品としての価値**: 日常的なGit操作の大部分をカバー

---

## v0.8 - コンフリクト検出・基本解決

**ゴール**: マージ時の競合を検出し、基本的な解決ができる

- [x] コンフリクト検出
  - [x] マージ時の競合を検出
  - [x] 競合ファイル一覧表示
  - [x] 競合マーカーのハイライト
- [x] 基本解決操作
  - [x] Ours を採用
  - [x] Theirs を採用
  - [x] 両方を採用
  - [ ] 手動編集
- [x] 解決完了
  - [x] ファイルを解決済みとしてマーク
  - [x] マージコミット作成

**完動品としての価値**: 基本的なマージ競合を解決できる

---

## v0.9 - 3ウェイマージビューア・リベース

**ゴール**: 高度なコンフリクト解決とリベースができる

- [x] 3ウェイマージビューア
  - [x] Base（共通祖先）表示
  - [x] Ours（現在のブランチ）表示
  - [x] Theirs（マージ元）表示
  - [x] 結果プレビュー
  - [ ] 各パネル間の差分ハイライト
- [x] リベース対応
  - [x] 基本リベース
  - [x] リベース中の競合解決
  - [x] リベース中止/継続
- [x] インタラクティブリベース
  - [x] コミット順序変更
  - [x] コミットの squash/fixup
  - [x] コミットの編集/削除

**完動品としての価値**: 複雑な競合も視覚的に解決できる

---

## v0.10 - AI連携（基本）

**ゴール**: AI によるコミット支援ができる

- [x] LLM CLIアダプター基盤
  - [x] CLI 自動検出（claude, codex, gh copilot 等）
  - [ ] 設定ファイルでのCLI登録
  - [x] 統一インターフェースでの呼び出し
- [x] コミットメッセージ生成
  - [x] ステージ済み差分から自動生成
  - [x] Conventional Commits 形式対応
  - [x] 日本語/英語切り替え
  - [x] 生成結果の編集・採用
- [x] プライバシー設定
  - [ ] 送信するコード範囲の制限
  - [x] 機密ファイルの除外パターン
  - [x] ローカルLLM優先モード

**完動品としての価値**: コミットメッセージ作成の手間を削減

---

## v0.11 - AI連携（レビュー・分析）

**ゴール**: AI による差分の分析とレビュー支援ができる

- [x] コードレビュー支援
  - [x] 差分に対するレビューコメント提案
  - [x] バグ・問題点の指摘
  - [x] セキュリティリスク検出
- [ ] PRレビュー効率化ビュー
  - [ ] リスクの高い差分を自動ハイライト
  - [ ] 依存パッケージ更新の検出
  - [ ] 公開API変更の検出
  - [ ] ファイル単位の複雑度スコア
- [x] コンフリクト解決支援
  - [x] 競合箇所の意図を解析
  - [x] マージ案の提示
- [x] PR/MR説明文生成
  - [x] ブランチ全体の変更から生成
  - [ ] テンプレート対応

**完動品としての価値**: レビュー品質向上と分析の効率化

---

## v0.12 - AI連携（パッチ生成・Human-in-the-loop）

**ゴール**: AI が生成した修正を人が確認して適用できる

- [ ] AIアクション実行（Human-in-the-loop）
  - [ ] レビューコメントから修正パッチ生成
  - [ ] 提案のプレビュー表示
  - [ ] 承認 → 適用のワークフロー
  - [ ] 部分採用機能
- [ ] Issue連携
  - [ ] Issueから実装案を生成
  - [ ] テストコードの生成提案
- [ ] 生成履歴
  - [ ] 過去の生成結果を参照
  - [ ] 生成パターンの学習（将来拡張用）

**完動品としての価値**: AIの提案を安全に取り込める

---

## v0.13 - UI/UX・GitHub連携

**ゴール**: カスタマイズ性とGitHub/GitLab連携を強化

- [x] UI/UX カスタマイズ
  - [x] ライト/ダークモード
  - [x] カラーテーマ選択（Cobalt / Emerald / Rose / Amber / Slate / Violet）
  - [x] カスタムカラーテーマ（設定ファイルで追加可能）
  - [x] フォント設定
  - [x] キーバインドカスタマイズ
  - [x] レイアウトカスタマイズ
- [x] GitHub/GitLab 連携
  - [x] PR/MR 作成（ブラウザで開く）
  - [x] Issue 参照リンク
  - [x] CI/CD 状態表示

**完動品としての価値**: 既存のワークフローに統合できる

---

## v0.14 - 品質安定化・パフォーマンス

**ゴール**: プロダクション品質への到達

- [ ] パフォーマンス最適化
  - [ ] 大規模リポジトリ対応（10万コミット以上）
  - [ ] 差分計算の非同期処理
  - [ ] 履歴の遅延読み込み
  - [ ] メモリ使用量の最適化
- [ ] クロスプラットフォーム
  - [ ] macOS 動作確認・調整
  - [ ] Linux 動作確認・調整
  - [ ] Windows 動作確認・調整
- [ ] テスト・品質
  - [x] Tauri MockRuntime テスト整備（コマンド層の結合テスト19件）
  - [ ] ユニットテスト整備
  - [ ] E2Eテスト整備（Playwright + IPC モック）
  - [ ] エラーハンドリング見直し

**完動品としての価値**: 安定して日常使いできる品質

---

## v1.0 - 正式リリース

**ゴール**: 一般公開可能な完成版

- [ ] ドキュメント
  - [ ] ユーザーガイド
  - [ ] キーボードショートカット一覧
  - [ ] 設定リファレンス
  - [ ] FAQ / トラブルシューティング
- [ ] 配布
  - [ ] Homebrew formula
  - [ ] Windows インストーラー
  - [ ] Linux パッケージ（deb/rpm/AppImage）
- [ ] リリース準備
  - [ ] ライセンス整備
  - [ ] CHANGELOG
  - [ ] リリースノート

**完動品としての価値**: 誰でもインストールして使い始められる

---

## v1.1 - Cherry-pick・Revert

**ゴール**: コミット単位の取り込みと取り消しができる

- [x] Cherry-pick
  - [x] ブランチ選択ドロップダウンからコミットを選択して適用
  - [x] 複数コミット一括適用
  - [x] Cherry-pick 時のコンフリクト解決（v0.8 の仕組みを再利用）
- [x] Revert
  - [x] 指定コミットを打ち消すコミットを作成
  - [x] Revert 結果のプレビュー表示

**完動品としての価値**: 他ブランチの特定コミットを取り込んだり、問題のあるコミットを安全に取り消せる

---

## v1.2 - Reset・Reflog

**ゴール**: コミット位置の操作と誤操作からの復元ができる

- [x] Reset
  - [x] Soft Reset（コミットのみ取り消し、変更はステージに残る）
  - [x] Mixed Reset（コミットとステージを取り消し、変更はワーキングツリーに残る）
  - [x] Hard Reset（すべて取り消し）※確認ダイアログ必須
  - [x] ファイル単位の Reset（特定ファイルを特定コミットの状態に戻す）
- [x] Reflog
  - [x] HEAD / ブランチの移動履歴表示
  - [x] Reflog エントリからの復元操作（失われたコミットの救出）

**完動品としての価値**: Reset で柔軟にコミット位置を操作しつつ、Reflog で誤操作からも復帰できる

---

## v1.3 - 検索強化

**ゴール**: リポジトリ内の情報を素早く見つけられる

- [ ] ファイル内容検索
  - [ ] リポジトリ全体のテキスト検索（git grep）
  - [ ] 正規表現対応
  - [ ] 検索結果からファイルを開く
- [ ] コミット検索
  - [ ] コミットメッセージ検索
  - [ ] 差分内容から検索（pickaxe / -S オプション相当）
- [ ] ファイル名検索
  - [ ] パターンでファイルを検索
  - [ ] ファジーマッチ対応

**完動品としての価値**: 「あの変更どこだっけ？」を素早く解決できる

---

## v1.4 - サブモジュール・ワークツリー

**ゴール**: 複雑なプロジェクト構成を管理できる

- [ ] サブモジュール
  - [ ] サブモジュール一覧表示（パス、URL、現在のコミット）
  - [ ] サブモジュール追加
  - [ ] サブモジュール更新（同期）
  - [ ] サブモジュール削除
- [ ] ワークツリー
  - [ ] ワークツリー一覧表示
  - [ ] ワークツリー追加（ブランチ指定）
  - [ ] ワークツリー削除

**完動品としての価値**: モノレポやサブモジュール構成のプロジェクトを GUI で管理できる

---

## v1.5 - 署名・Git設定

**ゴール**: コミット署名と Git 設定の GUI 管理ができる

- [ ] 署名付きコミット
  - [ ] GPG 署名付きコミット
  - [ ] SSH 署名付きコミット
  - [ ] 署名鍵の設定 UI
  - [ ] 署名状態の表示（履歴ビューで検証済み/未検証バッジ）
- [ ] Gitconfig GUI 編集
  - [ ] ユーザー設定（name, email）の編集
  - [ ] リポジトリ固有設定の編集
  - [ ] よく使う設定項目の GUI 化

**完動品としての価値**: セキュリティ意識の高い開発フローと、ターミナル不要の Git 設定管理

---

## v1.6 - リポジトリ管理・CLI拡張

**ゴール**: リポジトリの開き方・作り方の選択肢を広げる

- [ ] リポジトリ管理
  - [ ] クローン（HTTPS/SSH 対応、GUI ダイアログ）
  - [ ] 新規リポジトリ初期化（git init）
  - [ ] 最近開いたリポジトリ一覧
- [ ] .gitignore テンプレート
  - [ ] github/gitignore からテンプレート取得
  - [ ] 言語/フレームワーク選択
  - [ ] 複数テンプレート組み合わせ
  - [ ] 既存 .gitignore とのマージ
- [ ] CLI 拡張
  - [ ] `rocket clone <url>` でクローン & 起動
  - [ ] `rocket commit -m "msg"` 等のクイックアクション
  - [ ] bash/zsh/fish シェル補完スクリプト
  - [ ] エイリアス登録（`rkt` 等）

**完動品としての価値**: プロジェクト開始から日常操作まで Rocket だけで完結できる

---

## v1.7 - マルチリポジトリ・自動化

**ゴール**: 複数リポジトリの同時操作と自動化で効率を上げる

- [ ] 複数リポジトリのタブ表示
  - [ ] タブで複数リポジトリを同時に開く
  - [ ] `rocket . --tab` で既存ウィンドウに追加
  - [ ] タブ間のドラッグ&ドロップ
- [ ] 自動 fetch
  - [ ] バックグラウンドで定期的に fetch
  - [ ] fetch 間隔の設定
  - [ ] 新着コミット数の通知バッジ
- [ ] 通知機能
  - [ ] 操作完了/エラー時のシステム通知
  - [ ] リモート更新の検知通知

**完動品としての価値**: 複数プロジェクトを横断的に管理し、リモートの変更を見逃さない

---

## アーキテクチャ方針

拡張性を確保するため、以下の設計方針を採用:

### レイヤー分離

```text
┌─────────────────────────────────┐
│     UI Layer (React / Tauri)    │  ← Webフロントエンド
├─────────────────────────────────┤
│   Tauri Command (IPC Bridge)    │  ← Rust ↔ フロントエンド通信
├─────────────────────────────────┤
│        Application Layer        │  ← ユースケース・ワークフロー
├─────────────────────────────────┤
│         Domain Layer           │  ← Git操作のビジネスロジック
├─────────────────────────────────┤
│      Infrastructure Layer       │  ← git2-rs / git CLI / LLM CLI
└─────────────────────────────────┘
```

### プラグイン機構

- LLM CLIアダプターは設定ファイルで拡張可能
- 将来的にプラグインシステムも検討

### 設定の外部化

- すべての設定は `~/.config/rocket/` に集約
- デフォルト値は組み込み、ユーザー設定で上書き
- 設定変更は再起動不要（ホットリロード）
