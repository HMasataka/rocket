/* ===== Tree Layout ===== */
.tree-layout {
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.tree-panel {
  width: 280px;
  flex: 0 0 280px;
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.preview-panel {
  flex: 1 1 auto;
  min-width: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* ===== Tree Filter ===== */
.tree-filter {
  width: 120px;
  padding: 4px 8px;
  background: var(--bg-tertiary);
  border: 1px solid transparent;
  border-radius: 4px;
  color: var(--text-primary);
  font-family: inherit;
  font-size: 11px;
  transition: all 0.15s ease;
}

.tree-filter:focus {
  outline: none;
  border-color: var(--accent);
  width: 160px;
}

.tree-filter::placeholder { color: var(--text-muted); }

/* ===== Tree Content ===== */
.tree-content {
  flex: 1;
  overflow-y: auto;
  padding: 4px 0;
}

/* ===== Tree Node ===== */
.tree-node-row {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 12px;
  cursor: pointer;
  transition: background-color 0.1s ease;
  font-size: 13px;
  color: var(--text-secondary);
  user-select: none;
}

.tree-node-row:hover { background: var(--bg-tertiary); color: var(--text-primary); }

.tree-node.selected > .tree-node-row {
  background: var(--accent-dim);
  color: var(--text-primary);
}

/* Indentation via data-depth */
.tree-node[data-depth="0"] > .tree-node-row { padding-left: 12px; }
.tree-node[data-depth="1"] > .tree-node-row { padding-left: 28px; }
.tree-node[data-depth="2"] > .tree-node-row { padding-left: 44px; }
.tree-node[data-depth="3"] > .tree-node-row { padding-left: 60px; }
.tree-node[data-depth="4"] > .tree-node-row { padding-left: 76px; }

/* ===== Chevron ===== */
.tree-chevron {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  color: var(--text-muted);
  transition: transform 0.15s ease;
}

.tree-node.collapsed > .tree-node-row > .tree-chevron {
  transform: rotate(-90deg);
}

.tree-chevron-spacer {
  width: 14px;
  flex-shrink: 0;
}

/* ===== Tree Icons ===== */
.tree-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.tree-icon.folder { color: var(--warning); }
.tree-icon.file-go { color: #00add8; }
.tree-icon.file-md { color: var(--accent); }
.tree-icon.file-config { color: var(--text-muted); }

/* ===== Tree Name ===== */
.tree-name {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
}

.tree-node.dir > .tree-node-row > .tree-name { font-weight: 500; }

/* ===== Tree Badge (git status) ===== */
.tree-badge {
  font-size: 10px;
  font-weight: 700;
  width: 16px;
  height: 16px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.tree-badge.add { background: var(--success-dim); color: var(--success); }
.tree-badge.modify { background: var(--warning-dim); color: var(--warning); }
.tree-badge.delete { background: var(--danger-dim); color: var(--danger); }

/* ===== Preview Breadcrumb ===== */
.preview-breadcrumb {
  display: flex;
  align-items: center;
  gap: 2px;
  font-size: 13px;
  min-width: 0;
}

.breadcrumb-segment {
  color: var(--text-muted);
  white-space: nowrap;
  cursor: pointer;
  transition: color 0.15s ease;
}

.breadcrumb-segment:hover { color: var(--accent); }
.breadcrumb-segment.current { color: var(--text-primary); font-weight: 600; cursor: default; }
.breadcrumb-segment.current:hover { color: var(--text-primary); }

.breadcrumb-sep {
  width: 12px;
  height: 12px;
  color: var(--text-muted);
  flex-shrink: 0;
}

/* ===== File Info Bar ===== */
.file-info-bar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 8px 16px;
  border-bottom: 1px solid var(--border);
  background: var(--bg-secondary);
  font-size: 11px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.file-info-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.file-info-item svg { width: 12px; height: 12px; }

.file-info-item.commit-link {
  margin-left: auto;
  font-family: 'JetBrains Mono', monospace;
  cursor: pointer;
  transition: color 0.15s ease;
}

.file-info-item.commit-link:hover { color: var(--accent); }

/* ===== File Preview Content ===== */
.file-preview-content {
  flex: 1;
  overflow: auto;
  font-family: 'JetBrains Mono', monospace;
  font-size: 12px;
  line-height: 1.6;
  padding: 0;
}

.code-line {
  display: flex;
  min-height: 22px;
  transition: background-color 0.1s ease;
}

.code-line:hover { background: var(--bg-hover); }

.code-line-num {
  width: 44px;
  text-align: right;
  padding-right: 12px;
  color: var(--text-muted);
  user-select: none;
  flex-shrink: 0;
}

.code-line-text {
  flex: 1;
  white-space: pre;
  padding-right: 16px;
}

/* ===== Syntax Highlighting ===== */
.code-keyword { color: var(--danger); }
.code-string { color: var(--success); }
.code-comment { color: var(--text-muted); font-style: italic; }
.code-func { color: var(--accent); }

/* ===== Responsive Design ===== */
@media (min-width: 1400px) {
  .tree-panel { flex: 0 0 320px; }
}

@media (max-width: 1023px) {
  .tree-layout { flex-direction: column; }
  .tree-panel { flex: 0 0 auto; width: 100%; max-height: 220px; border-right: none; border-bottom: 1px solid var(--border); }
}

@media (max-width: 767px) {
  .tree-panel { max-height: 180px; }
  .file-info-bar { overflow-x: auto; white-space: nowrap; }
  .file-info-item.commit-link { display: none; }
}
